{% extends "base.html" %}

{% block title %}–ö–∞—Ç–∞–ª–æ–≥ —Å–º–∞—Ä—Ç—Ñ–æ–Ω—ñ–≤{% endblock %}

{% block content %}


  <!-- –ü–æ—à—É–∫ -->
  <div class="row mb-4">
    <div class="col-md-8">
      <form method="get" action="/" class="d-flex" id="searchForm">
        <input type="text" class="form-control me-2" name="q" placeholder="–ü–æ—à—É–∫ —Å–º–∞—Ä—Ç—Ñ–æ–Ω—ñ–≤..." value="{{ request.args.get('q', '') }}">
        <button class="btn btn-primary" type="submit">üîç –ü–æ—à—É–∫</button>
        <input type="hidden" name="sort" value="{{ request.args.get('sort', '') }}">
        <!-- –î–æ–¥–∞—î–º–æ –ø—Ä–∏—Ö–æ–≤–∞–Ω—ñ –ø–æ–ª—è –¥–ª—è —Ñ—ñ–ª—å—Ç—Ä—ñ–≤ -->
        <input type="hidden" name="brand" id="hiddenBrand" value="{{ request.args.get('brand', '') }}">
        <input type="hidden" name="os" id="hiddenOs" value="{{ request.args.get('os', '') }}">
        <input type="hidden" name="screen_type" id="hiddenScreenType" value="{{ request.args.get('screen_type', '') }}">
        <input type="hidden" name="refresh_rate" id="hiddenRefreshRate" value="{{ request.args.get('refresh_rate', '') }}">
        <input type="hidden" name="ram" id="hiddenRam" value="{{ request.args.get('ram', '') }}">
        <input type="hidden" name="rom" id="hiddenRom" value="{{ request.args.get('rom', '') }}">
        <input type="hidden" name="video_recording" id="hiddenVideoRecording" value="{{ request.args.get('video_recording', '') }}">
        <input type="hidden" name="wifi_version" id="hiddenWifiVersion" value="{{ request.args.get('wifi_version', '') }}">
        <input type="hidden" name="bluetooth_version" id="hiddenBluetoothVersion" value="{{ request.args.get('bluetooth_version', '') }}">
        <input type="hidden" name="sim_type" id="hiddenSimType" value="{{ request.args.get('sim_type', '') }}">
        <input type="hidden" name="sim_count" id="hiddenSimCount" value="{{ request.args.get('sim_count', '') }}">
        <input type="hidden" name="fingerprint_sensor" id="hiddenFingerprintSensor" value="{{ request.args.get('fingerprint_sensor', '') }}">
        <input type="hidden" name="body_material" id="hiddenBodyMaterial" value="{{ request.args.get('body_material', '') }}">
        <input type="hidden" name="ip_protection" id="hiddenIpProtection" value="{{ request.args.get('ip_protection', '') }}">
        <input type="hidden" name="color" id="hiddenColor" value="{{ request.args.get('color', '') }}">
        <!-- Checkbox —Ñ—ñ–ª—å—Ç—Ä–∏ -->
        <input type="hidden" name="microsd_support" id="hiddenMicrosdSupport" value="">
        <input type="hidden" name="optical_stabilization" id="hiddenOpticalStabilization" value="">
        <input type="hidden" name="wireless_charge" id="hiddenWirelessCharge" value="">
        <input type="hidden" name="reverse_charge" id="hiddenReverseCharge" value="">
        <input type="hidden" name="support_5g" id="hiddenSupport5g" value="">
        <input type="hidden" name="gps" id="hiddenGps" value="">
        <input type="hidden" name="nfc" id="hiddenNfc" value="">
        <input type="hidden" name="ir_port" id="hiddenIrPort" value="">
        <input type="hidden" name="volte_support" id="hiddenVolteSupport" value="">
        <input type="hidden" name="face_unlock" id="hiddenFaceUnlock" value="">
      </form>
    </div>
  </div>

  <div class="row">

    <!-- –ê—Å–æ—Ä—Ç–∏–º–µ–Ω—Ç -->
    <div class="col-md-9">
      <h5 class="mb-3">–ê–°–û–†–¢–ò–ú–ï–ù–¢</h5>

      <div class="mb-3">
        <label for="sortSelect" class="form-label"><strong>–°–æ—Ä—Ç—É–≤–∞–Ω–Ω—è:</strong></label>
        <select id="sortSelect" class="form-select" style="max-width: 250px;">
          <option value="">–ó–∞ –∑–∞–º–æ–≤—á—É–≤–∞–Ω–Ω—è–º</option>
          <option value="title_asc" {{ 'selected' if request.args.get('sort') == 'title_asc' }}>–ù–∞–∑–≤–∞ (–ê ‚Üí –Ø)</option>
          <option value="title_desc" {{ 'selected' if request.args.get('sort') == 'title_desc' }}>–ù–∞–∑–≤–∞ (–Ø ‚Üí –ê)</option>
          <option value="price_asc" {{ 'selected' if request.args.get('sort') == 'price_asc' }}>–¶—ñ–Ω–∞ (–≤—ñ–¥ –¥–µ—à–µ–≤–∏—Ö)</option>
          <option value="price_desc" {{ 'selected' if request.args.get('sort') == 'price_desc' }}>–¶—ñ–Ω–∞ (–≤—ñ–¥ –¥–æ—Ä–æ–≥–∏—Ö)</option>
        </select>
      </div>

      <div class="row g-3">
        <!-- –ö–∞—Ä—Ç–æ—á–∫–∏ —Ç–æ–≤–∞—Ä—ñ–≤ -->
        {% for product in products %}
        <div class="col-md-3">
          <div class="card product-card h-100">
            <img src="{{ product.image_url }}" class="card-img-top" alt="{{ product.title }}">
              <div class="card-body d-flex flex-column align-items-center justify-content-between">
              <h6 class="card-title text-center">{{ product.title }}</h6>
              <p class="card-text text-success fw-bold">{{ product.price }} –≥—Ä–Ω</p>
              <div class="mt-2 d-flex gap-2">
                <button class="btn btn-outline-danger btn-sm wishlist-btn" title="–î–æ–¥–∞—Ç–∏ –¥–æ –≤–∏—à–ª–∏—Å—Ç—É" data-product-id="{{ product.id }}">
                ‚ù§Ô∏è
                </button>
                <button class="btn btn-outline-primary btn-sm cart-btn" title="–î–æ–¥–∞—Ç–∏ –¥–æ –∫–æ—à–∏–∫–∞" data-product-id="{{ product.id }}">
                üõí
                </button>
              </div>
            </div>
          </div>
        </div>
        {% endfor %}
      </div>
    </div>

    <!-- –§—ñ–ª—å—Ç—Ä–∏ -->
    <div class="col-md-3">
      <div class="filters">
        <div class="d-flex gap-2 mt-3">
          <button class="btn btn-outline-secondary w-50" id="clearFilters">–û—á–∏—Å—Ç–∏—Ç–∏ —Ñ—ñ–ª—å—Ç—Ä–∏</button>
          <button class="btn btn-info w-50" id="applyFilters">–ó–∞—Å—Ç–æ—Å—É–≤–∞—Ç–∏ —Ñ—ñ–ª—å—Ç—Ä–∏</button>
        </div>
        
        <h6>üì± –û—Å–Ω–æ–≤–Ω—ñ —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏</h6>
        <div class="mb-3">
          <label for="brandFilter" class="form-label">–ë—Ä–µ–Ω–¥</label>
          <select id="brandFilter" class="form-select filter-select">
            <option value="">–£—Å—ñ</option>
            {% for brand in filter_options.brand %}
            <option value="{{ brand }}" {{ 'selected' if request.args.get('brand') == brand }}>{{ brand }}</option>
            {% endfor %}
          </select>
        </div>

        <div class="mb-3">
          <label for="osFilter" class="form-label">–û–°</label>
          <select id="osFilter" class="form-select filter-select">
            <option value="">–£—Å—ñ</option>
            {% for os in filter_options.os %}
            <option value="{{ os }}" {{ 'selected' if request.args.get('os') == os }}>{{ os }}</option>
            {% endfor %}
          </select>
        </div>

        <h6>üì∫ –î–∏—Å–ø–ª–µ–π</h6>
        <div class="mb-3">
          <label for="screenTypeFilter" class="form-label">–¢–∏–ø –µ–∫—Ä–∞–Ω—É</label>
          <select id="screenTypeFilter" class="form-select filter-select">
            <option value="">–£—Å—ñ</option>
            {% for screen_type in filter_options.screen_type %}
            <option value="{{ screen_type }}" {{ 'selected' if request.args.get('screen_type') == screen_type }}>{{ screen_type }}</option>
            {% endfor %}
          </select>
        </div>

        <div class="mb-3">
          <label for="refreshRateFilter" class="form-label">–ß–∞—Å—Ç–æ—Ç–∞ –æ–Ω–æ–≤–ª–µ–Ω–Ω—è</label>
          <select id="refreshRateFilter" class="form-select filter-select">
            <option value="">–£—Å—ñ</option>
            {% for refresh_rate in filter_options.refresh_rate %}
            <option value="{{ refresh_rate }}" {{ 'selected' if request.args.get('refresh_rate') == refresh_rate }}>{{ refresh_rate }}</option>
            {% endfor %}
          </select>
        </div>

        <h6>‚öôÔ∏è –ü—Ä–æ–¥—É–∫—Ç–∏–≤–Ω—ñ—Å—Ç—å</h6>
        <div class="mb-3">
          <label for="ramFilter" class="form-label">–û–ø–µ—Ä–∞—Ç–∏–≤–Ω–∞ –ø–∞–º º—è—Ç—å (RAM)</label>
          <select id="ramFilter" class="form-select filter-select">
            <option value="">–£—Å—è</option>
            {% for ram in filter_options.ram %}
            <option value="{{ ram }}" {{ 'selected' if request.args.get('ram') == ram }}>{{ ram }}</option>
            {% endfor %}
          </select>
        </div>

        <div class="mb-3">
          <label for="romFilter" class="form-label">–í–Ω—É—Ç—Ä—ñ—à–Ω—è –ø–∞–º º—è—Ç—å (ROM)</label>
          <select id="romFilter" class="form-select filter-select">
            <option value="">–£—Å—è</option>
            {% for rom in filter_options.rom %}
            <option value="{{ rom }}" {{ 'selected' if request.args.get('rom') == rom }}>{{ rom }}</option>
            {% endfor %}
          </select>
        </div>

        <div class="form-check mb-3">
          <input class="form-check-input filter-checkbox" type="checkbox" id="microsdSupportFilter" {{ 'checked' if request.args.get('microsd_support') == 'on' }}>
          <label class="form-check-label" for="microsdSupportFilter">–ü—ñ–¥—Ç—Ä–∏–º–∫–∞ microSD</label>
        </div>

        <h6>üì∏ –ö–∞–º–µ—Ä–∞</h6>
        <div class="form-check mb-3">
          <input class="form-check-input filter-checkbox" type="checkbox" id="opticalStabilizationFilter" {{ 'checked' if request.args.get('optical_stabilization') == 'on' }}>
          <label class="form-check-label" for="opticalStabilizationFilter">–û–ø—Ç–∏—á–Ω–∞ —Å—Ç–∞–±—ñ–ª—ñ–∑–∞—Ü—ñ—è</label>
        </div>

        <div class="mb-3">
          <label for="videoRecordingFilter" class="form-label">–í—ñ–¥–µ–æ–∑–∞–ø–∏—Å</label>
          <select id="videoRecordingFilter" class="form-select filter-select">
            <option value="">–ë—É–¥—å-—è–∫–∞</option>
            {% for video_recording in filter_options.video_recording %}
            <option value="{{ video_recording }}" {{ 'selected' if request.args.get('video_recording') == video_recording }}>{{ video_recording }}</option>
            {% endfor %}
          </select>
        </div>

        <h6>üîã –ê–∫—É–º—É–ª—è—Ç–æ—Ä</h6>
        <div class="form-check mb-3">
          <input class="form-check-input filter-checkbox" type="checkbox" id="wirelessChargeFilter" {{ 'checked' if request.args.get('wireless_charge') == 'on' }}>
          <label class="form-check-label" for="wirelessChargeFilter">–ë–µ–∑–¥—Ä–æ—Ç–æ–≤–∞ –∑–∞—Ä—è–¥–∫–∞</label>
        </div>

        <div class="form-check mb-3">
          <input class="form-check-input filter-checkbox" type="checkbox" id="reverseChargeFilter" {{ 'checked' if request.args.get('reverse_charge') == 'on' }}>
          <label class="form-check-label" for="reverseChargeFilter">–ó–≤–æ—Ä–æ—Ç–Ω–∞ –∑–∞—Ä—è–¥–∫–∞</label>
        </div>

        <h6>üåê –ó–≤'—è–∑–æ–∫</h6>
        <div class="form-check mb-3">
          <input class="form-check-input filter-checkbox" type="checkbox" id="support5gFilter" {{ 'checked' if request.args.get('support_5g') == 'on' }}>
          <label class="form-check-label" for="support5gFilter">–ü—ñ–¥—Ç—Ä–∏–º–∫–∞ 5G</label>
        </div>

        <div class="mb-3">
          <label for="wifiVersionFilter" class="form-label">–í–µ—Ä—Å—ñ—è Wi-Fi</label>
          <select id="wifiVersionFilter" class="form-select filter-select">
            <option value="">–ë—É–¥—å-—è–∫–∞</option>
            {% for wifi_version in filter_options.wifi_version %}
            <option value="{{ wifi_version }}" {{ 'selected' if request.args.get('wifi_version') == wifi_version }}>{{ wifi_version }}</option>
            {% endfor %}
          </select>
        </div>

        <div class="mb-3">
          <label for="bluetoothVersionFilter" class="form-label">–í–µ—Ä—Å—ñ—è Bluetooth</label>
          <select id="bluetoothVersionFilter" class="form-select filter-select">
            <option value="">–ë—É–¥—å-—è–∫–∞</option>
            {% for bluetooth_version in filter_options.bluetooth_version %}
            <option value="{{ bluetooth_version }}" {{ 'selected' if request.args.get('bluetooth_version') == bluetooth_version }}>{{ bluetooth_version }}</option>
            {% endfor %}
          </select>
        </div>

        <div class="form-check mb-3">
          <input class="form-check-input filter-checkbox" type="checkbox" id="gpsFilter" {{ 'checked' if request.args.get('gps') == 'on' }}>
          <label class="form-check-label" for="gpsFilter">GPS</label>
        </div>

        <div class="form-check mb-3">
          <input class="form-check-input filter-checkbox" type="checkbox" id="nfcFilter" {{ 'checked' if request.args.get('nfc') == 'on' }}>
          <label class="form-check-label" for="nfcFilter">NFC</label>
        </div>

        <div class="form-check mb-3">
          <input class="form-check-input filter-checkbox" type="checkbox" id="irPortFilter" {{ 'checked' if request.args.get('ir_port') == 'on' }}>
          <label class="form-check-label" for="irPortFilter">–Ü–ß-–ø–æ—Ä—Ç</label>
        </div>

        <h6>üìû SIM</h6>
        <div class="mb-3">
          <label for="simTypeFilter" class="form-label">–¢–∏–ø SIM</label>
          <select id="simTypeFilter" class="form-select filter-select">
            <option value="">–ë—É–¥—å-—è–∫–∏–π</option>
            {% for sim_type in filter_options.sim_type %}
            <option value="{{ sim_type }}" {{ 'selected' if request.args.get('sim_type') == sim_type }}>{{ sim_type }}</option>
            {% endfor %}
          </select>
        </div>

        <div class="mb-3">
          <label for="simCountFilter" class="form-label">–ö—ñ–ª—å–∫—ñ—Å—Ç—å SIM</label>
          <select id="simCountFilter" class="form-select filter-select">
            <option value="">–ë—É–¥—å-—è–∫–∞</option>
            {% for sim_count in filter_options.sim_count %}
            <option value="{{ sim_count }}" {{ 'selected' if request.args.get('sim_count') == sim_count|string }}>{{ sim_count }}</option>
            {% endfor %}
          </select>
        </div>

        <div class="form-check mb-3">
          <input class="form-check-input filter-checkbox" type="checkbox" id="volteSupportFilter" {{ 'checked' if request.args.get('volte_support') == 'on' }}>
          <label class="form-check-label" for="volteSupportFilter">–ü—ñ–¥—Ç—Ä–∏–º–∫–∞ VoLTE</label>
        </div>

        <h6>üîê –ë–µ–∑–ø–µ–∫–∞</h6>
        <div class="form-check mb-3">
          <input class="form-check-input filter-checkbox" type="checkbox" id="faceUnlockFilter" {{ 'checked' if request.args.get('face_unlock') == 'on' }}>
          <label class="form-check-label" for="faceUnlockFilter">–†–æ–∑–ø—ñ–∑–Ω–∞–≤–∞–Ω–Ω—è –æ–±–ª–∏—á—á—è</label>
        </div>

        <div class="mb-3">
          <label for="fingerprintFilter" class="form-label">–°–∫–∞–Ω–µ—Ä –≤—ñ–¥–±–∏—Ç–∫–∞</label>
          <select id="fingerprintFilter" class="form-select filter-select">
            <option value="">–ë—É–¥—å-—è–∫–∏–π</option>
            {% for fingerprint_sensor in filter_options.fingerprint_sensor %}
            <option value="{{ fingerprint_sensor }}" {{ 'selected' if request.args.get('fingerprint_sensor') == fingerprint_sensor }}>{{ fingerprint_sensor }}</option>
            {% endfor %}
          </select>
        </div>

        <h6>üèóÔ∏è –ö–æ—Ä–ø—É—Å</h6>
        <div class="mb-3">
          <label for="bodyMaterialFilter" class="form-label">–ú–∞—Ç–µ—Ä—ñ–∞–ª –∫–æ—Ä–ø—É—Å—É</label>
          <select id="bodyMaterialFilter" class="form-select filter-select">
            <option value="">–ë—É–¥—å-—è–∫–∏–π</option>
            {% for body_material in filter_options.body_material %}
            <option value="{{ body_material }}" {{ 'selected' if request.args.get('body_material') == body_material }}>{{ body_material }}</option>
            {% endfor %}
          </select>
        </div>

        <div class="mb-3">
          <label for="ipProtectionFilter" class="form-label">IP-–∑–∞—Ö–∏—Å—Ç</label>
          <select id="ipProtectionFilter" class="form-select filter-select">
            <option value="">–ë—É–¥—å-—è–∫–∏–π</option>
            {% for ip_protection in filter_options.ip_protection %}
            <option value="{{ ip_protection }}" {{ 'selected' if request.args.get('ip_protection') == ip_protection }}>{{ ip_protection }}</option>
            {% endfor %}
          </select>
        </div>

        <div class="mb-3">
          <label for="colorFilter" class="form-label">–ö–æ–ª—ñ—Ä</label>
          <select id="colorFilter" class="form-select filter-select">
            <option value="">–ë—É–¥—å-—è–∫–∏–π</option>
            {% for color in filter_options.color %}
            <option value="{{ color }}" {{ 'selected' if request.args.get('color') == color }}>{{ color }}</option>
            {% endfor %}
          </select>
        </div>
      </div>
    </div>
  </div>

  <!-- –í—Ö—ñ–¥ -->
  <div class="modal fade" id="loginModal" tabindex="-1" aria-labelledby="loginLabel" aria-hidden="true">
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="loginLabel">–í—Ö—ñ–¥</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
        </div>
        <div class="modal-body">
          <div class="mb-3">
            <label for="loginEmail" class="form-label">Email</label>
            <input type="email" class="form-control" id="loginEmail" required>
          </div>
          <div class="mb-3">
            <label for="loginPassword" class="form-label">–ü–∞—Ä–æ–ª—å</label>
            <input type="password" class="form-control" id="loginPassword" required>
          </div>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-primary" id="loginSubmit">–£–≤—ñ–π—Ç–∏</button>
        </div>
      </div>
    </div>
  </div>

  <!-- –†–µ—î—Å—Ç—Ä–∞—Ü—ñ—è -->
  <div class="modal fade" id="registerModal" tabindex="-1" aria-labelledby="registerLabel" aria-hidden="true">
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="registerLabel">–†–µ—î—Å—Ç—Ä–∞—Ü—ñ—è</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
        </div>
        <div class="modal-body">
          <div class="mb-3">
            <label for="regName" class="form-label">–Ü–º º—è</label>
            <input type="text" class="form-control" id="regName" required>
          </div>
          <div class="mb-3">
            <label for="regEmail" class="form-label">Email</label>
            <input type="email" class="form-control" id="regEmail" required>
          </div>
          <div class="mb-3">
            <label for="regPassword" class="form-label">–ü–∞—Ä–æ–ª—å</label>
            <input type="password" class="form-control" id="regPassword" required>
          </div>
          <div class="mb-3">
            <label for="regConfirmPassword" class="form-label">–ü—ñ–¥—Ç–≤–µ—Ä–¥–∂–µ–Ω–Ω—è –ø–∞—Ä–æ–ª—é</label>
            <input type="password" class="form-control" id="regConfirmPassword" required>
          </div>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-success" id="registerSubmit">–ó–∞—Ä–µ—î—Å—Ç—Ä—É–≤–∞—Ç–∏—Å—è</button>
        </div>
      </div>
    </div>
  </div>

</div>

{% endblock %}